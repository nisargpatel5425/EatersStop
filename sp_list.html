<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Home</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  


  <style type="text/css">
    .cardview{
      width: 40%;
    }
    .space{
      margin-top:50px;
    }
    .collapsible-body{
      padding-top: 0px
    }
    #shape-change{
       width: 330px;
       height: 330px;
       background-color: #8b8e94;
       color: #000;
       margin-top: 2%;
       margin-bottom: 2%;

  }
  .col{
    text-align: center;
  }

    a:hover{
      color: #fff;

    }

    #shape-change:hover{
       /*width: 256px;*/
      /*height: 384;*/
      border-radius: 50%;
      background: #000000;
       margin-top: 2%;
       margin-bottom: 2%;

       color: #fff;

       animation-name: circle; 
       animation-delay: 0s;
       animation-duration: 0.5s;
      
    }
    @-webkit-keyframes circle {
    from {border-radius: 0px;}
    to {border-radius: 200px;}
}

/* Standard syntax */
@keyframes circle {
    from {border-radius: 0px;}
    to {border-radius: 200px;}
}

.dis
{
  margin-left:5% !important;
}
@media only screen and (max-width: 600px){
.dis {
    margin-left: 0px !important;
}
#shape-change{
  width: 100%;
  height: 267px;
}
}
 
  </style>
</head>
<body>
<!-- parallax -->


 




<nav class="navbar white black-text navbar-default navbar-fixed-top probootstrap-navbar">
      <div class="container">
        

        <div id="navbar-collapse" class="navbar-collapse collapse">
          <ul class="nav  navbar-nav black-text navbar-left">
              <li ><a class="black-text" style="font-size: 25px;">Eaters' Stop</a></li>
          </ul>
          <ul class="nav black-text navbar-nav navbar-right" style="float: right;">

            <!-- <li class="active"><a href="#" data-nav-section="welcome">Welcome</a></li>
            <li><a href="#" data-nav-section="Works">How it Works</a></li>

            <li><a href="#" data-nav-section="specialties">Why us</a></li>
            <li><a href="#" data-nav-section="events">About Us</a></li>
            <li><a href="#" data-nav-section="contact">Contact</a></li> -->
            <li><a class="black-text" onclick="testJS()"  data-nav-section="login" >Profile</a></li>
            <li><a class="black-text" href="edit_menu.html"  data-nav-section="login" >My Orders</a></li>

            <li><a class="black-text" id="area2" href="sp_list.html"></a></li>

            <li><a class="black-text" href="index.html" onclick="invoice.html" data-nav-section="login" >Invoice</a></li>
            
            <li><a class="black-text" id="fname" ></a></li>

            <li><a class="black-text" onclick="logout()">Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="parallax-container" style="height: 450px">
  <div class="parallax"><img src="images/5.jpg"></div>
  </div>
</div>

<div class="container row" id="list_manage" style="width: 90% ">

  <!-- <div class="row container" id="list_manage" style="margin-top: 5%;"> -->
  <h2 class="header center">Service Provider List</h2>
  <img src="images/t13.jpg">

  </div>


  <!-- footer -->
    <footer class="page-footer black"  >
          <div class="container">
            <div class="row">
              <div class="col l4 offset-l2 s12">
               <div class="probootstrap-footer-widget">
              <h3>Locations</h3>
              <div class="row">
                <div class="col-md-6">
                  <p> A 303 radhey residency
Rajlaxmi society
Nr. Divyalok bunglows<br>
Samta laxmipura road
Vadodara  <br> New York NY 10016</p>
                </div>
                
              </div>
            </div>
          </div>
          <div class="probootstrap-footer-widget">
              <h3>Open Hours</h3>
              <div class="row">
                <div class="col-md-4">
                  <p>Monday - Sunday (Lunch)<br>  Before 03:00pm</p>
                </div>
                <div class="col-md-4">
                  <p>Monday - Sunday (Dinner)<br> After 03:00pm</p>
                </div>
                <div class="col-md-4">
                  <p>Available for <br> Email at eatersstop@gmail.com</p>
                </div>
              </div>
            </div>
              </div>
            </div>
          <!-- </div> -->
          <div class="footer-copyright">
            <div class="container">
            
          </div>
        </footer>
      


  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <script type="text/javascript">
  $(document).ready(function(){
      $('.parallax').parallax();

      $('select').material_select();  //dropdown
       $(".button-collapse").sideNav(); //nav-mobile
       $('.modal').modal();
       $('.collapsible').collapsible();
       $('.datepicker').pickadate({
        selectMonths: true, // Creates a dropdown to control month
        selectYears: 50, // Creates a dropdown of 15 years to control year,
        today: 'Today',
        clear: 'Clear',
        close: 'Ok',
        closeOnSelect: false // Close upon selecting a date,
  });
    });


</script>
<script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
<script src="http://www.datejs.com/build/date.js" type="text/javascript"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyA6qc5XKVuRKGIoG9ilyMxKb0LjDP8V-NM",
    authDomain: "tiffin-service-c75e3.firebaseapp.com",
    databaseURL: "https://tiffin-service-c75e3.firebaseio.com",
    projectId: "tiffin-service-c75e3",
    storageBucket: "tiffin-service-c75e3.appspot.com",
    messagingSenderId: "224722105482"
  }
  firebase.initializeApp(config);
</script>

<!-- Welcome user firebase -->
<script type="text/javascript">
var userEmail;
var Uid;
firebase.auth().onAuthStateChanged(function(user)
 {

  if (user) {
    // User is signed in.
    var user = firebase.auth().currentUser;
    userEmail = user.email;
    // $("#emailname").html("Welcome "+user.email);
    profile_retrieve();
  } else {
    window.open("index.html","_self");
    // No user is signed in.
  }
});

function testJS() {
 
    var b = Uid;
        url = 'profile.html?name=' + encodeURIComponent(b);

    document.location.href = url;
}

function testJSP(E) {
 
    var b = E;
        url = 'profile_sp.html?name=' + encodeURIComponent(b);

    document.location.href = url;
}

var Area1;
var Country;
function profile_retrieve()
{
	// alert(userEmail);
  firebase.database().ref('customer/').orderByChild("Email").equalTo(userEmail).on("value", function(snapshot)
    {

        snapshot.forEach(function(child)
        {

           var obj = child.val();
           Uid = obj.Uid;
           Area1 = obj.Area;
           Country = obj.Country;
// alert(Area1);

          list_retrieve();
          
           
           $("#fname").html("Welcome "+obj.Firstname);
           $("#area2").html(obj.Area);

           
        });
    });

  
// alert(Uid);

}

function list_retrieve(){
  firebase.database().ref('service_provider/').orderByChild("area").equalTo(Area1).on("value", function(snapshot)
    {

        snapshot.forEach(function(child)
        {

           var obj = child.val();
           var servicename = obj.service_name;
           var email = obj.Email;
           var Uid = obj.Uid;
           
        // $('#list_manage').append("<div class=\"col s4 m4\"><div class=\"card horizontal\"><div class=\"card-image\"><img src=\"https://lorempixel.com/100/190/nature/6\"></div><div class=\"card-stacked\"><div class=\"card-content\"><p>"+servicename+".</p></div><div class=\"card-action\"><a href=\"#\" onclick=\"testJSP('"+Uid+"')\">This is a link</a></div></div></div></div>");

        // $('#list_manage').append("<div  id=\"shape-change\" class=\"col s3 m4 dis\" style=\"\"><div style=\"text-align: center; padding-top: 50%;\"><h5>"+servicename+"</h5><div><button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\" onclick=\"testJSP('"+Uid+"')\">View Details<i class=\"material-icons right\">send</i></button></div></div></div>");

        $('#list_manage').append("<div  id=\"shape-change\" class=\"col s3 m4 dis\" style=\"\"><div style=\"text-align: center; padding-top: 50%;\"><h5>"+servicename+"</h5><div style=\"text-align: center; padding-left: 30%;\"><a class=\"col \" onclick=\"testJSP('"+Uid+"')\">View Details</a></div></div></div>");
     });
  });
}
















function logout() {
// alert("logout");
  firebase.auth().signOut().then(function() {
  // Sign-out successful.
  window.open("index.html","_self");
}).catch(function(error) {
  // An error happened.
});
  // body...
}






</script>

</body>
</html>